{% extends 'user_base.html' %}
{% block content %}

    <!-- bradcam_area  -->
    
    <!--/ bradcam_area  -->
    <header>
        <div class="header-area " style="background: rgba(0, 29, 56, 0.8);">
            <div id="sticky-header" class="main-header-area">
                <div class="container-fluid ">
                    <div class="header_bottom_border">
                        <div class="row align-items-center">
                            <div class="col-xl-3 col-lg-2">
                                <div class="logo">
                                    <a href="index.html">
                                        <img src="/static/user_assets/img/logo.png" alt="">
                                    </a>
                                </div>
                            </div>
                            <div class="col-xl-6 col-lg-7">
                                <div class="main-menu  d-none d-lg-block">
                                    <nav>
                                        <ul id="navigation">
                                            <li><a href="index.html">home</a></li>
                                            <li><a href="jobs.html">Browse Job</a></li>
                                            <li><a href="#">pages <i class="ti-angle-down"></i></a>
                                                <ul class="submenu">
                                                    <li><a href="candidate.html">Candidates </a></li>
                                                    <li><a href="job_details.html">job details </a></li>
                                                    <li><a href="elements.html">elements</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="#">blog <i class="ti-angle-down"></i></a>
                                                <ul class="submenu">
                                                    <li><a href="blog.html">blog</a></li>
                                                    <li><a href="single-blog.html">single-blog</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="contact.html">Contact</a></li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-3 d-none d-lg-block">
                                <div class="Appointment">
                                    <div class="phone_num d-none d-xl-block">
                                        <a href="#">Log in</a>
                                    </div>
                                    <div class="d-none d-lg-block">
                                        <a class="boxed-btn3" href="#">Post a Job</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mobile_menu d-block d-lg-none"></div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </header>
    <!-- job_listing_area_start  -->
    <div class="job_listing_area plus_padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="job_filter white-bg">
                        <div class="form_inner white-bg">
                            <h3>Filter</h3>
                            <form action="#">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="single_field">
                                            <input type="text" placeholder="Search keyword">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <form method="GET" action="{% url 'jobs' %}">
                                            <div class="single_field">
                                                <select name="location" class="wide" onchange="this.form.submit()">
                                                    <option value="">All Locations</option>
                                                    {% for location in locations %}
                                                        <option value="{{ location }}" {% if selected_location == location %}selected{% endif %}>
                                                            {{ location }}
                                                        </option>
                                                    {% endfor %}
                                                </select>
                                            </div>

                                             <!-- Category Filter -->
    <div class="single_field">
        <select name="category" class="wide" onchange="this.form.submit()">
            <option value="">All Categories</option>
            {% for category in categories %}
                <option value="{{ category }}" {% if selected_category == category %}selected{% endif %}>
                    {{ category }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- Job Type Filter -->
    <div class="single_field">
        <select name="job_type" class="wide" onchange="this.form.submit()">
            <option value="">All Job Types</option>
            {% for job_type in job_types %}
                <option value="{{ job_type }}" {% if selected_job_type == job_type %}selected{% endif %}>
                    {{ job_type }}
                </option>
            {% endfor %}
        </select>
    </div>
                                        </form>
                                    </div>
                                   
                                   
                                </div>
                            </form>
                        </div>
                        <div class="range_wrap">
                            <label for="amount">Price range:</label>
                            <div id="slider-range"></div>
                            <p>
                                <input type="text" id="amount" readonly style="border:0; color:#7A838B; font-size: 14px; font-weight:400;">
                            </p>
                        </div>
                        <div class="reset_btn">
                            <button  class="boxed-btn3 w-100" type="submit">Reset</button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="recent_joblist_wrap">
                        <div class="recent_joblist white-bg">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <h4>Job Listing</h4>
                                </div>
                                <div class="col-md-6">
                                    <div class="serch_cat d-flex justify-content-end">
                                        <select>
                                            <option data-display="Most Recent">Most Recent</option>
                                            <option value="1">Marketer</option>
                                            <option value="2">WordPress</option>
                                            <option value="4">Designer</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div class="job_lists m-0">
                        <div class="row">
                            {% for job in jobs %}
                            <div class="col-lg-12 col-md-12">
                                <div class="single_jobs white-bg d-flex justify-content-between">
                                    <div class="jobs_left d-flex align-items-center">
                                        <div class="thumb">
                                            <img src="{{ job.company_logo.url }}" alt="">
                                        </div>
                                        <div class="jobs_conetent">
                                            <a href="#"><h4>{{ job.job_title }}</h4></a>
                                            <div class="links_locat d-flex align-items-center">
                                                <div class="location">
                                                    <p><i class="fa fa-map-marker"></i> {{ job.location }}</p>
                                                </div>
                                                <div class="location">
                                                    <p><i class="fa fa-clock-o"></i> {{ job.job_type }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="jobs_right">
                                        <div class="apply_now">
                                            <a class="heart_mark" href="#"><i class="fa fa-heart"></i></a>
                                            <a href="/login" target="_blank" class="boxed-btn3">Apply Now</a>
                                        </div>
                                        <div class="date">
                                            <p class="view-more-btn" data-job-id="{{ job.id }}">View More</p> 
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Hidden Job Details Section -->
                                <div class="job_details" id="job-details-{{ job.id }}" style="display: none; background: #f9f9f9; padding: 15px; border-radius: 5px; margin-top: 10px;">
                                    <p><strong>Company:</strong> {{ job.company_name }}</p>
                                    <p><strong>Salary:</strong> {{ job.salary }}</p>
                                    <p><strong>Experience:</strong> {{ job.experience }}</p>
                                    <p><strong>Education:</strong> {{ job.education }}</p>
                                    <p><strong>Work Mode:</strong> {{ job.work_mode }}</p>
                                    <p><strong>Required Skills:</strong> {{ job.required_skills }}</p>
                                    <p><strong>Roles & Responsibilities:</strong> {{ job.roles_and_responsibilities }}</p>
                                    
                                    <!-- Apply Button -->
                                    <div class="apply_now">
                                        <a href="/login" target="_blank" class="boxed-btn3">Apply Now</a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    
                </div>
                
            </div>
        </div>
    </div>
    <!-- job_listing_area_end  -->

 
    <script>
        $( function() {
            $( "#slider-range" ).slider({
                range: true,
                min: 0,
                max: 24600,
                values: [ 750, 24600 ],
                slide: function( event, ui ) {
                    $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] +"/ Year" );
                }
            });
            $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
                " - $" + $( "#slider-range" ).slider( "values", 1 ) + "/ Year");
        } );
        </script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const viewMoreButtons = document.querySelectorAll(".view-more-btn");

        viewMoreButtons.forEach(button => {
            button.addEventListener("click", function() {
                let jobId = this.getAttribute("data-job-id");
                let detailsDiv = document.getElementById("job-details-" + jobId);
                let jobCard = this.closest(".single_jobs"); // Get the job card to scroll to

                // Close all other job details sections
                document.querySelectorAll(".job_details").forEach(div => {
                    if (div !== detailsDiv) {
                        div.style.display = "none"; // Hide other job details
                    }
                });

                // Reset all "View More" button texts
                document.querySelectorAll(".view-more-btn").forEach(btn => {
                    if (btn !== this) {
                        btn.innerText = "View More";
                    }
                });

                // Toggle the clicked job details section
                if (detailsDiv.style.display === "none" || detailsDiv.style.display === "") {
                    detailsDiv.style.display = "block";  // Show details
                    this.innerText = "View Less";  // Change button text
                    
                    // Smoothly scroll to the job card
                    jobCard.scrollIntoView({ behavior: "smooth", block: "start" });
                } else {
                    detailsDiv.style.display = "none";  // Hide details
                    this.innerText = "View More";  // Reset button text
                }
            });
        });
    });
</script>






    {% endblock %}

	